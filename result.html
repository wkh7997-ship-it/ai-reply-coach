<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI í”¼ë¶€ ì½”ì¹˜ - ë¶„ì„ ê²°ê³¼</title>
  <style>
    :root {
      --primary: #9b8bff;
      --primary-strong: #5c6bff;
      --bg-deep: #050616;
      --bg-top: #11152b;
      --glass: rgba(10, 14, 32, 0.96);
      --text-main: #f9fafb;
      --text-sub: #cbd5f5;
      --border-soft: rgba(148, 163, 255, 0.35);
      --risk-low: #22c55e;
      --risk-mid: #eab308;
      --risk-high: #ef4444;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      min-height: 100vh;
      background:
        radial-gradient(circle at top, rgba(88,101,242,0.32) 0, transparent 55%),
        radial-gradient(circle at bottom, rgba(59,130,246,0.26) 0, transparent 62%),
        linear-gradient(160deg, var(--bg-top), var(--bg-deep));
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px 14px;
    }

    .shell { width: 100%; max-width: 440px; }

    .card {
      background: var(--glass);
      border-radius: 26px;
      padding: 14px 16px 14px;
      border: 1px solid var(--border-soft);
      box-shadow:
        0 22px 50px rgba(0,0,0,0.9),
        0 0 0 1px rgba(15,23,42,0.7);
      backdrop-filter: blur(18px);
      position: relative;
      overflow: hidden;
      max-height: calc(100vh - 32px);
      display: flex;
      flex-direction: column;
    }

    .card-inner-scroll {
      overflow-y: auto;
      padding-right: 2px;
      margin-right: -4px;
      flex: 1;
    }

    .top-accent {
      position: absolute;
      left: 14%; right: 14%; top: 10px;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(148,163,255,0.9), transparent);
      opacity: 0.95;
    }

    /* â­ ê³µí†µ ìƒë‹¨ ë°” */
    .top-bar {
      position: relative;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 6px;
      margin-bottom: 6px;
    }

    .top-bar-left,
    .top-bar-center,
    .top-bar-right {
      display: flex;
      align-items: center;
    }

    .top-bar-left { min-width: 70px; justify-content: flex-start; }
    .top-bar-center { flex: 1; justify-content: center; font-size: 0.9rem; font-weight: 600; }
    .top-bar-right { min-width: 70px; justify-content: flex-end; }

    .back-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      background: transparent;
      border: none;
      font-size: 0.82rem;
      color: var(--text-sub);
      cursor: pointer;
      padding: 4px 6px;
    }

    .step-pill {
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.7);
      font-size: 0.72rem;
      color: rgba(203,213,255,0.95);
      background: rgba(10,16,40,0.95);
      white-space: nowrap;
    }

    .header-wrap {
      margin-top: 4px;
      margin-bottom: 10px;
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 10px;
    }

    .header-title {
      font-size: 1.4rem;
      font-weight: 750;
      line-height: 1.1;
    }

    .header-sub {
      font-size: 0.82rem;
      color: var(--text-sub);
      margin-top: 4px;
      line-height: 1.4;
    }

    .header-date {
      font-size: 0.72rem;
      color: rgba(203,213,255,0.9);
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.6);
      background: rgba(15,23,42,0.9);
      white-space: nowrap;
    }

    /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
    .spinner {
      width: 42px;
      height: 42px;
      border: 4px solid rgba(255,255,255,0.16);
      border-top-color: #a78bfa;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 18px auto 12px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .loading-text {
      text-align: center;
      font-size: 0.93rem;
      color: var(--text-sub);
      margin-bottom: 6px;
      line-height: 1.5;
    }

    .scroll-hint {
      display: none;
      text-align: center;
      font-size: 0.78rem;
      color: rgba(203,213,255,0.85);
      margin-bottom: 6px;
    }

    .result-wrapper {
      margin-top: 4px;
      display: none;
    }

    .score-section {
      background:
        radial-gradient(circle at top left, rgba(148,163,255,0.25), transparent 55%),
        rgba(12,18,42,0.98);
      border-radius: 22px;
      padding: 14px 14px 12px;
      border: 1px solid rgba(148,163,255,0.55);
      margin-bottom: 12px;
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .score-circle {
      width: 82px;
      height: 82px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0%, #ffffff, #c7d2ff);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow:
        0 12px 26px rgba(15,23,42,0.9),
        0 0 0 1px rgba(226,232,255,0.65);
      overflow: hidden;
    }

    .score-circle-inner {
      width: 80%;
      height: 80%;
      border-radius: inherit;
      display: flex;
      align-items: center;
      justify-content: center;
      background:
        radial-gradient(circle at top, rgba(79,70,229,0.16), transparent 60%);
    }

    .score-number-wrap {
      text-align: center;
      line-height: 1.1;
    }

    .score-value {
      font-size: 1.7rem;
      font-weight: 800;
      color: #111827;
    }

    .score-unit {
      font-size: 0.78rem;
      color: #6b7280;
      margin-top: 1px;
    }

    .score-text-block { flex: 1; }

    .score-label {
      font-size: 0.72rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #a5b4ff;
      margin-bottom: 4px;
    }

    .score-main {
      font-size: 1rem;
      font-weight: 680;
      margin-bottom: 3px;
    }

    .score-desc {
      font-size: 0.83rem;
      color: var(--text-sub);
      line-height: 1.5;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 7px;
    }

    .chip {
      font-size: 0.75rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.6);
      color: #e5e7eb;
      background: rgba(15,23,42,0.9);
    }

    .chip-risk-low {
      border-color: var(--risk-low);
      color: #bbf7d0;
      background: rgba(22,163,74,0.18);
    }

    .chip-risk-mid {
      border-color: var(--risk-mid);
      color: #fef9c3;
      background: rgba(202,138,4,0.18);
    }

    .chip-risk-high {
      border-color: var(--risk-high);
      color: #fee2e2;
      background: rgba(239,68,68,0.2);
    }

    .section {
      background: rgba(11,17,38,0.96);
      border-radius: 18px;
      padding: 11px 13px 9px;
      border: 1px solid rgba(148,163,255,0.3);
      margin-bottom: 10px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .section-title {
      font-size: 0.82rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #9ca3ff;
    }

    .section-tag {
      font-size: 0.72rem;
      color: rgba(209,213,255,0.9);
    }

    .section-body {
      font-size: 0.88rem;
      color: var(--text-sub);
      line-height: 1.7;
      margin-top: 3px;
    }

    .issues-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .issue-pill {
      font-size: 0.8rem;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(30,64,175,0.85);
      border: 1px solid rgba(191,219,254,0.7);
      color: #e0f2fe;
    }

    .footer-note {
      font-size: 0.74rem;
      color: rgba(148,163,255,0.9);
      text-align: center;
      margin-top: 4px;
      margin-bottom: 2px;
    }

    .btn-wrap {
      margin-top: 8px;
      padding-top: 6px;
      border-top: 1px solid rgba(15,23,42,0.9);
    }

    .action-btn {
      width: 100%;
      padding: 13px 14px;
      margin-top: 9px;
      border-radius: 18px;
      border: 1px solid rgba(148,163,255,0.45);
      background:
        radial-gradient(circle at top left, rgba(148,163,255,0.18), transparent 60%),
        rgba(12,16,40,0.95);
      color: #e5e7ff;
      font-size: 0.95rem;
      font-weight: 620;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 12px;
      cursor: pointer;
      box-shadow:
        0 6px 18px rgba(0,0,0,0.45),
        0 0 0 1px rgba(15,23,42,0.8);
      transition: all 0.18s ease-out;
    }

    .action-btn:hover {
      background:
        radial-gradient(circle at top left, rgba(191,219,254,0.22), transparent 60%),
        rgba(16,22,54,0.98);
      transform: translateY(-2px);
      box-shadow:
        0 10px 26px rgba(0,0,0,0.55),
        0 0 0 1px rgba(129,140,248,0.9);
    }

    .action-icon {
      font-size: 1.25rem;
      opacity: 0.92;
    }
  </style>
</head>

<body>
<div class="shell">
  <div class="card">
    <div class="top-accent"></div>

    <!-- â­ ê³µí†µ ìƒë‹¨ í—¤ë” -->
    <div class="top-bar">
      <div class="top-bar-left">
        <button class="back-btn" onclick="goBack()">
          â† ì´ì „ ë‹¨ê³„
        </button>
      </div>
      <div class="top-bar-center">
        ë¶„ì„ ê²°ê³¼ ë³´ê¸°
      </div>
      <div class="top-bar-right">
        <div class="step-pill">STEP 4 / 4</div>
      </div>
    </div>

    <!-- ì œëª© + ë‚ ì§œ -->
    <div class="header-wrap">
      <div>
        <div class="header-title">ì˜¤ëŠ˜ì˜ í”¼ë¶€ ë¦¬í¬íŠ¸</div>
        <div class="header-sub" id="header-sub">
          ë°©ê¸ˆ ì—…ë¡œë“œí•œ ì‚¬ì§„ì„ ê¸°ë°˜ìœ¼ë¡œ<br />
          AIê°€ í”¼ë¶€ ìƒíƒœë¥¼ ì •ë¦¬í–ˆì–´ìš”.
        </div>
      </div>
      <div class="header-date" id="header-date">-</div>
    </div>

    <div id="spinner" class="spinner"></div>
    <div class="loading-text" id="status-text">
      ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...
    </div>

    <div class="scroll-hint" id="scroll-hint">
      â¬‡ ì•„ë˜ë¡œ ë‚´ë ¤ì„œ ë£¨í‹´ê³¼ ìƒì„¸ ë¶„ì„ì„ í™•ì¸í•´ ë³´ì„¸ìš”
    </div>

    <div class="card-inner-scroll">
      <div id="result-wrapper" class="result-wrapper">
        <!-- ì ìˆ˜ & ìš”ì•½ -->
        <div class="score-section">
          <div class="score-circle">
            <div class="score-circle-inner">
              <div class="score-number-wrap">
                <div id="score-value" class="score-value">-</div>
                <div class="score-unit">/ 100</div>
              </div>
            </div>
          </div>
          <div class="score-text-block">
            <div class="score-label">SKIN HEALTH SCORE</div>
            <div id="score-main" class="score-main">í”¼ë¶€ ì ìˆ˜</div>
            <div id="score-desc" class="score-desc">
              AIê°€ ë¶„ì„í•œ ì „ë°˜ì ì¸ í”¼ë¶€ ìƒíƒœ ìš”ì•½ì…ë‹ˆë‹¤.
            </div>
            <div class="chip-row">
              <span id="chip-skin-type" class="chip">í”¼ë¶€íƒ€ì…</span>
              <span id="chip-risk" class="chip">ìœ„í—˜ë„</span>
            </div>
          </div>
        </div>

        <!-- ë‚´ê°€ ì„ íƒí•œ ê³ ë¯¼ -->
        <div class="section">
          <div class="section-header">
            <div class="section-title">ë‚´ê°€ ì„ íƒí•œ í”¼ë¶€ ê³ ë¯¼</div>
            <div class="section-tag">Your focus</div>
          </div>
          <div class="section-body">
            <div id="user-concerns-empty">
              ì´ì „ ë‹¨ê³„ì—ì„œ ì„ íƒí•œ ê³ ë¯¼ì„ ê¸°ë°˜ìœ¼ë¡œ ë¦¬í¬íŠ¸ë¥¼ ë§Œë“¤ì—ˆì–´ìš”.
            </div>
            <div id="user-concerns" class="chip-row"></div>
          </div>
        </div>

        <!-- ì£¼ìš” ê³ ë¯¼ -->
        <div class="section">
          <div class="section-header">
            <div class="section-title">ì£¼ìš” ê³ ë¯¼ í¬ì¸íŠ¸</div>
            <div class="section-tag">Focus area</div>
          </div>
          <div class="section-body">
            <div id="issues-text">AIê°€ ì¸ì‹í•œ ê³ ë¯¼ í¬ì¸íŠ¸ì…ë‹ˆë‹¤.</div>
            <div id="issues-list" class="issues-list"></div>
          </div>
        </div>

        <!-- í•œ ì¤„ ìš”ì•½ -->
        <div class="section">
          <div class="section-header">
            <div class="section-title">AI í•œ ì¤„ ì´í‰</div>
            <div class="section-tag">Summary</div>
          </div>
          <div id="summary-text" class="section-body">
            -
          </div>
        </div>

        <!-- ê´€ë¦¬ ê°€ì´ë“œ -->
        <div class="section">
          <div class="section-header">
            <div class="section-title">ì¼ìƒ ê´€ë¦¬ ê°€ì´ë“œ</div>
            <div class="section-tag">Daily routine</div>
          </div>
          <div id="detail-text" class="section-body">
            -
          </div>
        </div>

        <div class="footer-note">
          * ì´ ë¦¬í¬íŠ¸ëŠ” AI ë¶„ì„ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì°¸ê³ ìš© ê°€ì´ë“œì…ë‹ˆë‹¤.
        </div>
      </div>
    </div>

    <!-- í•˜ë‹¨ ë²„íŠ¼: ì œí’ˆ / í™ˆ -->
    <div class="btn-wrap">
      <button class="action-btn" onclick="goProducts()">
        <span class="action-icon">ğŸ§´</span>
        <span>ìµœê·¼ ì§„ë‹¨ ê¸°ë°˜ ì¶”ì²œ ì œí’ˆ ë³´ê¸°</span>
      </button>

      <button class="action-btn" onclick="goHome()">
        <span class="action-icon">ğŸ </span>
        <span>ì²« í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
      </button>
    </div>
  </div>
</div>

<script>
  function mapRisk(riskLevel) {
    if (riskLevel === "low") {
      return { label: "ìœ„í—˜ë„ ë‚®ìŒ", className: "chip chip-risk-low" };
    }
    if (riskLevel === "high") {
      return { label: "ìœ„í—˜ë„ ë†’ìŒ", className: "chip chip-risk-high" };
    }
    return { label: "ìœ„í—˜ë„ ë³´í†µ", className: "chip chip-risk-mid" };
  }

  function getScoreText(score) {
    let grade, desc;
    if (score >= 85) {
      grade = "A ë“±ê¸‰";
      desc = "ì „ë°˜ì ìœ¼ë¡œ ë§¤ìš° ê±´ê°•í•œ í”¼ë¶€ ì»¨ë””ì…˜ì´ì—ìš”. í˜„ì¬ ë£¨í‹´ì„ ìœ ì§€í•˜ë©´ì„œ ë³´ìŠµê³¼ ìì™¸ì„  ì°¨ë‹¨ë§Œ ì˜ ì±™ê²¨ë„ ì¢‹ì•„ìš”.";
    } else if (score >= 70) {
      grade = "B ë“±ê¸‰";
      desc = "ëŒ€ì²´ë¡œ ê´œì°®ì€ í”¼ë¶€ì§€ë§Œ, íŠ¹ì • ë¶€ìœ„(ëª¨ê³µÂ·í”¼ì§€Â·ì”ì£¼ë¦„ ë“±)ì— ì¡°ê¸ˆì”© ë¶€ë‹´ì´ ìŒ“ì´ê³  ìˆì–´ìš”.";
    } else if (score >= 50) {
      grade = "C ë“±ê¸‰";
      desc = "í”¼ë¶€ ì§„ì •Â·ë³´ìŠµì— ì¡°ê¸ˆ ë” ì‹ ê²½ ì¨ì£¼ë©´ í™•ì‹¤íˆ ì¢‹ì•„ì§ˆ ì—¬ì§€ê°€ ë³´ì—¬ìš”.";
    } else {
      grade = "D ë“±ê¸‰";
      desc = "ìê·¹ì ì¸ ì„¸ì•ˆÂ·ê±´ì¡°í•¨Â·ìˆ˜ë©´ ë¶€ì¡± ë“±ì´ í”¼ë¶€ì— ë§ì´ ëˆ„ì ëœ ìƒíƒœì¼ ìˆ˜ ìˆì–´ìš”. ì§€ê¸ˆë¶€í„° ë£¨í‹´ì„ ì •ë¦¬í•´ë³´ë©´ ì¢‹ì•„ìš”.";
    }
    return { grade, desc };
  }

  function saveHistory(result) {
    try {
      const today = new Date().toISOString().slice(0, 10);
      const raw = localStorage.getItem("diagnosisHistory");
      const history = raw ? JSON.parse(raw) : [];
      const entry = {
        date: today,
        score: result.score,
        skinType: result.skinType,
        riskLevel: result.riskLevel,
        summary: result.summary
      };
      const next = [entry, ...history].slice(0, 30);
      localStorage.setItem("diagnosisHistory", JSON.stringify(next));
    } catch (e) {
      console.warn("diagnosisHistory ì €ì¥ ì‹¤íŒ¨:", e);
    }
  }

  function setTodayLabel() {
    const el = document.getElementById("header-date");
    const now = new Date();
    const y = now.getFullYear();
    const m = String(now.getMonth() + 1).padStart(2, "0");
    const d = String(now.getDate()).padStart(2, "0");
    el.innerText = `${y}.${m}.${d}`;
  }

  function renderUserConcerns() {
    const raw = sessionStorage.getItem("userConcerns");
    const wrap = document.getElementById("user-concerns");
    const emptyEl = document.getElementById("user-concerns-empty");

    if (!wrap || !emptyEl) return;

    if (!raw) {
      emptyEl.innerText =
        "ì´ì „ ë‹¨ê³„ì—ì„œ ê³ ë¯¼ì„ ì„ íƒí•˜ì§€ ì•Šì•˜ì–´ìš”. ë‹¤ìŒ ì§„ë‹¨ì—ì„œëŠ” ê¼­ ì„ íƒí•´ ì£¼ì„¸ìš”.";
      wrap.innerHTML = "";
      return;
    }

    try {
      const concerns = JSON.parse(raw);
      if (!Array.isArray(concerns) || concerns.length === 0) {
        emptyEl.innerText =
          "ì´ì „ ë‹¨ê³„ì—ì„œ ê³ ë¯¼ì„ ì„ íƒí•˜ì§€ ì•Šì•˜ì–´ìš”. ë‹¤ìŒ ì§„ë‹¨ì—ì„œëŠ” ê¼­ ì„ íƒí•´ ì£¼ì„¸ìš”.";
        wrap.innerHTML = "";
        return;
      }

      emptyEl.innerText = "ì•„ë˜ ê³ ë¯¼ì„ ì¤‘ì‹¬ìœ¼ë¡œ ë¦¬í¬íŠ¸ë¥¼ êµ¬ì„±í–ˆì–´ìš”:";
      wrap.innerHTML = concerns
        .map((c) => `<span class="chip">${c}</span>`)
        .join("");
    } catch (e) {
      console.error("userConcerns JSON íŒŒì‹± ì˜¤ë¥˜:", e);
      emptyEl.innerText = "ì„ íƒí•œ ê³ ë¯¼ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆì–´ìš”.";
      wrap.innerHTML = "";
    }
  }

  function renderResult() {
    const spinner = document.getElementById("spinner");
    const statusText = document.getElementById("status-text");
    const wrapper = document.getElementById("result-wrapper");
    const scrollHint = document.getElementById("scroll-hint");

    let raw = sessionStorage.getItem("aiSkinResult");

    if (!raw) {
      spinner.style.display = "none";
      statusText.innerText =
        "ë¶„ì„ ê²°ê³¼ë¥¼ ì°¾ì§€ ëª»í–ˆì–´ìš”.\nì²˜ìŒ í™”ë©´ì—ì„œ ë‹¤ì‹œ ì§„ë‹¨ì„ ì§„í–‰í•´ ì£¼ì„¸ìš”.";
      scrollHint.style.display = "none";
      return;
    }

    let result;
    try {
      result = JSON.parse(raw);
    } catch (e) {
      console.error("aiSkinResult JSON íŒŒì‹± ì˜¤ë¥˜:", e);
      spinner.style.display = "none";
      statusText.innerText =
        "ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\në‹¤ì‹œ ì§„ë‹¨ì„ ì§„í–‰í•´ ì£¼ì„¸ìš”.";
      scrollHint.style.display = "none";
      return;
    }

    const score =
      typeof result.score === "number"
        ? Math.min(Math.max(result.score, 0), 100)
        : 70;
    const skinType = result.skinType || "ë³µí•©ì„±";
    const riskLevel = result.riskLevel || "mid";
    const issues = Array.isArray(result.issues) ? result.issues : [];
    const summary = result.summary || "ì „ë°˜ì ìœ¼ë¡œ ë¬´ë‚œí•œ í”¼ë¶€ ìƒíƒœì…ë‹ˆë‹¤.";
    const detailAdvice =
      result.detailAdvice ||
      "ì„¸ì•ˆ í›„ ê¸°ë³¸ ë³´ìŠµê³¼ ìì™¸ì„  ì°¨ë‹¨ë§Œ ê¾¸ì¤€íˆ ìœ ì§€í•´ ì¤˜ë„ í˜„ì¬ë³´ë‹¤ í”¼ë¶€ ì»¨ë””ì…˜ì´ í•œì¸µ ë” ì•ˆì •ë  ê±°ì˜ˆìš”.";

    saveHistory({ score, skinType, riskLevel, summary });

    const scoreInfo = getScoreText(score);
    const riskInfo = mapRisk(riskLevel);

    document.getElementById("score-value").innerText = score;
    document.getElementById("score-main").innerText = `${scoreInfo.grade} Â· ${skinType} í”¼ë¶€`;
    document.getElementById("score-desc").innerText = scoreInfo.desc;

    const chipSkin = document.getElementById("chip-skin-type");
    chipSkin.innerText = `í”¼ë¶€ íƒ€ì…: ${skinType}`;
    chipSkin.className = "chip";

    const chipRisk = document.getElementById("chip-risk");
    chipRisk.innerText = riskInfo.label;
    chipRisk.className = riskInfo.className;

    const issuesTextEl = document.getElementById("issues-text");
    const issuesListEl = document.getElementById("issues-list");
    issuesListEl.innerHTML = "";

    if (!issues.length) {
      issuesTextEl.innerText = "ëšœë ·í•˜ê²Œ ê°•ì¡°ë˜ëŠ” ê³ ë¯¼ í¬ì¸íŠ¸ëŠ” í¬ì§€ ì•Šì•„ ë³´ì—¬ìš”.";
    } else {
      issuesTextEl.innerText = "ì•„ë˜ í•­ëª©ì—ì„œ íŠ¹íˆ ì‹ ê²½ ì¨ì£¼ë©´ ì¢‹ì•„ìš”:";
      issues.forEach((iss) => {
        const span = document.createElement("span");
        span.className = "issue-pill";
        span.innerText = iss;
        issuesListEl.appendChild(span);
      });
    }

    document.getElementById("summary-text").innerText = summary;
    document.getElementById("detail-text").innerText = detailAdvice;

    renderUserConcerns();

    spinner.style.display = "none";
    statusText.style.display = "none";
    wrapper.style.display = "block";
    scrollHint.style.display = "block";
  }

  function goHome() {
    sessionStorage.removeItem("uploadedImage");
    sessionStorage.removeItem("aiSkinResult");
    sessionStorage.removeItem("userConcerns");
    window.location.href = "index.html";
  }

  function goProducts() {
    const raw = localStorage.getItem("diagnosisHistory");
    if (!raw) {
      alert("ë¨¼ì € AI ì§„ë‹¨ì„ ì§„í–‰í•´ì£¼ì„¸ìš”!");
      return;
    }
    window.location.href = "products.html";
  }

  function goBack() {
    // ë°”ë¡œ ì´ì „ ë‹¨ê³„(ê³ ë¯¼ ì„ íƒ í˜ì´ì§€)ë¡œ
    window.location.href = "options.html";
  }

  window.addEventListener("DOMContentLoaded", () => {
    setTodayLabel();
    renderResult();
  });
</script>

</body>
</html>
