<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI í”¼ë¶€ ì½”ì¹˜</title>

  <!-- â­ PWA & ì•„ì´ì½˜ ì—°ê²° -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#11152b" />

  <!-- ì•ˆë“œë¡œì´ë“œ/ì›¹ ì•„ì´ì½˜ -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png">

  <!-- iOS í™ˆí™”ë©´ ì•„ì´ì½˜ -->
  <link rel="apple-touch-icon" href="/icon-192.png" />

  <style>
    :root {
      --primary: #9b8bff;
      --primary-strong: #5c6bff;
      --bg-deep: #050616;
      --bg-top: #11152b;
      --glass: rgba(9, 12, 30, 0.9);
      --text-main: #f9fafb;
      --text-sub: #cbd5f5;
      --border-soft: rgba(148, 163, 255, 0.35);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Pretendard", system-ui, sans-serif;
      min-height: 100vh;
      background:
        radial-gradient(circle at top, rgba(88, 101, 242, 0.35) 0, transparent 55%),
        radial-gradient(circle at bottom, rgba(6, 95, 180, 0.3) 0, transparent 60%),
        linear-gradient(160deg, var(--bg-top), var(--bg-deep));
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px 16px;
    }

    .shell { width: 100%; max-width: 440px; }

    .card {
      background: var(--glass);
      border-radius: 24px;
      padding: 18px;
      border: 1px solid rgba(15, 23, 42, 0.9);
      box-shadow:
        0 20px 45px rgba(0,0,0,0.85),
        0 0 0 1px rgba(15,23,42,0.7);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(16px);
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 1px;
      border-radius: 22px;
      border: 1px solid rgba(148,163,255,0.35);
    }

    .top-accent {
      position: absolute; left: 16%; right: 16%; top: 10px; height: 1px;
      background: linear-gradient(90deg, transparent, rgba(148,163,255,0.9), transparent);
    }

    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 8px;
      margin-bottom: 4px;
      position: relative;
      z-index: 2;
    }

    .top-bar-left { min-width: 70px; }
    .top-bar-center {
      flex: 1; text-align: center;
      font-size: .9rem; font-weight: 600;
      color: #e5e7ff;
    }
    .top-bar-right { min-width: 70px; text-align: right; }

    .step-pill {
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.7);
      background: rgba(10,16,40,0.95);
      font-size: .72rem;
      color: rgba(203,213,255,0.95);
    }

    .logo-badge-wrap { 
      display: flex; 
      justify-content: center; 
      margin: 10px 0; 
    }

    .logo-badge {
      width: 70px; 
      height: 70px; 
      border-radius: 22px;
      display: flex; 
      align-items: center; 
      justify-content: center;
      background:
        radial-gradient(circle at 25% 0%, rgba(255,255,255,0.7), transparent 55%),
        radial-gradient(circle at 80% 100%, rgba(129,140,248,0.75), transparent 55%),
        linear-gradient(135deg, #181b3a, #2f3564);
      box-shadow:
        0 16px 30px rgba(15,23,42,0.95),
        0 0 0 1px rgba(148,163,255,0.5);
    }

    .logo-badge-inner {
      width: 50px; 
      height: 50px;
      border-radius: 18px;
      background: radial-gradient(circle at 30% 0%, #ffffff, #c7d2ff);
      display: flex; 
      align-items: center; 
      justify-content: center;
      box-shadow:
        0 8px 18px rgba(59,130,246,0.6),
        0 0 0 1px rgba(226,232,255,0.7);
    }

    h1 {
      text-align: center;
      font-size: 2rem;
      font-weight: 800;
      letter-spacing: .08em;
      margin-bottom: 4px;
      text-transform: uppercase;
      background: linear-gradient(120deg,#fff,#e0e7ff);
      -webkit-background-clip: text;
      color: transparent;
    }

    .subtitle {
      text-align: center;
      font-size: .8rem;
      letter-letter-spacing: .28em;
      color: #a5b4fc;
      margin-bottom: 16px;
    }

    .description {
      text-align: center;
      font-size: .98rem;
      color: var(--text-sub);
      margin-bottom: 26px;
      line-height: 1.45;
    }

    .section-box {
      background:
        radial-gradient(circle at top left, rgba(148,163,255,0.22), transparent 55%),
        rgba(15,23,42,0.96);
      border-radius: 20px;
      padding: 14px;
      border: 1px solid var(--border-soft);
      margin-bottom: 14px;
    }

    .section-title {
      text-align: center;
      font-size: 1rem;
      letter-spacing: .12em;
      color: #e5e7ff;
      margin-bottom: 6px;
    }

    .section-hint {
      text-align: center;
      font-size: .84rem;
      color: var(--text-sub);
      margin-bottom: 12px;
    }

    .btn {
      width: 100%;
      padding: 12px 0;
      border-radius: 999px;
      background: linear-gradient(135deg,var(--primary-strong),var(--primary));
      color:#fff;
      font-weight:650;
      font-size:.95rem;
      border:none;
      margin-bottom:8px;
      display:flex;
      justify-content:center;
      gap:8px;
      cursor:pointer;
      position:relative;
      overflow:hidden;
      box-shadow:0 12px 26px rgba(55,48,163,0.75);
    }

    input[type=file] {
      position:absolute;
      inset:0;
      opacity:0;
      cursor:pointer;
    }

    .menu-box {
      margin-top: 16px;
      padding: 14px;
      border-radius: 20px;
      background: rgba(15,23,42,0.86);
      border: 1px solid var(--border-soft);
    }
    .menu-title {
      font-size:.82rem;
      text-transform:uppercase;
      letter-spacing:.08em;
      color:#9ca3ff;
      margin-bottom:4px;
    }
    .today-status {
      font-size:.84rem;
      color:#cbd5ff;
      margin-bottom:8px;
    }
    .btn-mini {
      width:100%;
      padding:10px;
      border-radius:999px;
      border:1px solid rgba(148,163,255,0.6);
      background:rgba(15,23,42,0.9);
      color:#e5e7eb;
      font-size:.87rem;
      display:flex;
      justify-content:center;
      gap:8px;
      cursor:pointer;
    }
  </style>
</head>

<body>
<div class="shell">
  <div class="card">
    <div class="top-accent"></div>

    <div class="top-bar">
      <div class="top-bar-left"></div>
      <div class="top-bar-center">AI í”¼ë¶€ ì½”ì¹˜</div>
      <div class="top-bar-right">
        <div class="step-pill">STEP 1 / 4</div>
      </div>
    </div>

    <!-- ğŸŒŸ ë¬¼ë°©ìš¸ SVG â†’ icon-192.png ë¡œ ëŒ€ì²´ -->
    <div class="logo-badge-wrap">
      <div class="logo-badge">
        <div class="logo-badge-inner">
          <img src="/icon-192.png" alt="ë¡œê³ " style="width: 32px; height: 32px;" />
        </div>
      </div>
    </div>

    <h1>AI í”¼ë¶€ ì½”ì¹˜</h1>
    <div class="subtitle">PHOTO â€¢ ANALYSIS â€¢ ROUTINE</div>

    <div class="description">
      ì–¼êµ´ì´ ë³´ì´ëŠ” ì‚¬ì§„ í•œ ì¥ë§Œ ì˜¬ë¦¬ë©´,<br />
      AIê°€ í”¼ë¶€ ë¶„ì„Â·ë£¨í‹´Â·ì¶”ì²œ ì œí’ˆì„<br />
      ì•ˆë‚´í•´ë“œë¦½ë‹ˆë‹¤.
    </div>

    <div class="section-box">
      <div class="section-title">PHOTO UPLOAD</div>
      <div class="section-hint">
        ê°¤ëŸ¬ë¦¬ì—ì„œ ì„ íƒí•˜ê±°ë‚˜,<br>
        ë°ì€ ê³³ì—ì„œ ê³ ë¯¼ ë¶€ìœ„ê°€ ë³´ì´ê²Œ ì´¬ì˜í•˜ì„¸ìš”.
      </div>

      <label class="btn">
        ğŸ“ íŒŒì¼ì—ì„œ ì„ íƒí•˜ê¸°
        <input type="file" accept="image/*" onchange="goNextPage(event)">
      </label>

      <label class="btn">
        ğŸ“· ì¹´ë©”ë¼ë¡œ ì´¬ì˜í•˜ê¸°
        <input type="file" accept="image/*" capture="environment" onchange="goNextPage(event)">
      </label>
    </div>

    <div class="menu-box">
      <div class="menu-title">MY í”¼ë¶€ ê¸°ë¡</div>
      <div id="today-status" class="today-status">ğŸ“… ì˜¤ëŠ˜ ê¸°ë¡ ì—†ìŒ</div>

      <!-- âœ… ì—¬ê¸° ë²„íŠ¼ë§Œ ìˆ˜ì • -->
      <button class="btn-mini" type="button" onclick="goToProducts()">
        ğŸ” ìµœê·¼ ì§„ë‹¨ ê²°ê³¼ Â· ì¶”ì²œ ì œí’ˆ ë³´ê¸°
      </button>
    </div>
  </div>
</div>

<script>
  function goNextPage(event) {
    const file = event.target && event.target.files && event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = (e) => {
      const base64 = e.target.result;
      sessionStorage.setItem("uploadedImage", base64);
      window.location.href = "confirm.html";
    };
    reader.readAsDataURL(file);
  }

  // ğŸ”¹ ìµœê·¼ ì§„ë‹¨ ë‚ ì§œ í‘œì‹œ
  function updateTodayStatus() {
    const el = document.getElementById("today-status");
    const raw = localStorage.getItem("diagnosisHistory");

    if (!raw) {
      el.innerText = "ğŸ“… ì•„ì§ ì§„ë‹¨ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤";
      return;
    }

    try {
      const history = JSON.parse(raw);
      if (!Array.isArray(history) || history.length === 0) {
        el.innerText = "ğŸ“… ì•„ì§ ì§„ë‹¨ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤";
        return;
      }

      const latest = history[0]; // ê°€ì¥ ìµœê·¼ ê¸°ë¡
      el.innerText = `ğŸ“… ë§ˆì§€ë§‰ ì§„ë‹¨: ${latest.date} Â· ë°”ë¡œ ë³´ê¸°`;
    } catch (e) {
      el.innerText = "ğŸ“… ê¸°ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤";
      console.warn("diagnosisHistory íŒŒì‹± ì˜¤ë¥˜:", e);
    }
  }

  // âœ… ì´ í•¨ìˆ˜ê°€ ë²„íŠ¼ì— ì§ì ‘ ì—°ê²°ë˜ì–´ ìˆìŒ
  function goToProducts() {
    alert("ì¶”ì²œ ì œí’ˆ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤."); // â† ì´ê²Œ ë°˜ë“œì‹œ ë– ì•¼ í•¨
    window.location.href = "products.html";
  }

  updateTodayStatus();
</script>


</body>
</html>
