<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>AI ëŒ€í™” ì½”ì¹˜</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="manifest" href="/manifest.json" />

  <style>
    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --bg1: #050816;
      --bg2: #3b1d6a;
      --card-bg: rgba(8, 12, 32, 0.94);
      --text-main: #f9fafb;
      --text-sub: #a5b4fc;
      --border: rgba(255, 255, 255, 0.16);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #3b1d6a 0, #050816 45%, #020617 100%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px 16px 32px;
    }

    .app {
      width: 100%;
      max-width: 480px;
    }

    .card {
      background: var(--card-bg);
      border-radius: 24px;
      border: 1px solid var(--border);
      padding: 24px 20px 20px;
      box-shadow:
        0 18px 40px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(148, 163, 184, 0.12);
    }

    .header {
      margin-bottom: 20px;
    }

    .header-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 20px;
      font-weight: 700;
    }

    .header-title-icon {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }

    .header-sub {
      margin-top: 4px;
      font-size: 13px;
      color: var(--text-sub);
    }

    label {
      display: block;
      font-size: 13px;
      margin-bottom: 6px;
      color: #cbd5f5;
    }

    .select-wrap,
    .textarea-wrap {
      margin-bottom: 14px;
    }

    select,
    textarea {
      width: 100%;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      font-size: 14px;
      padding: 11px 14px;
      outline: none;
    }

    textarea {
      resize: vertical;
      min-height: 110px;
      line-height: 1.5;
    }

    .hint {
      font-size: 12px;
      color: #94a3b8;
      margin-bottom: 14px;
    }

    .btn-primary {
      width: 100%;
      border: none;
      border-radius: 18px;
      padding: 12px 16px;
      font-size: 15px;
      font-weight: 600;
      color: white;
      background: linear-gradient(90deg, var(--primary), var(--primary-dark));
      box-shadow: 0 8px 22px rgba(79, 70, 229, 0.65);
    }

    .btn-primary:active {
      transform: translateY(1px);
      box-shadow: 0 4px 12px rgba(79, 70, 229, 0.6);
    }

    .status-text {
      margin-top: 10px;
      font-size: 12px;
      color: #a5b4fc;
      min-height: 16px;
    }
  </style>
</head>
<body>
  <main class="app">
    <section class="card">
      <header class="header">
        <div class="header-title">
          <div class="header-title-icon">ğŸ’¬</div>
          <div>AI ëŒ€í™” ì½”ì¹˜</div>
        </div>
        <p class="header-sub">ì¹´í†¡ ë‹µì¥, ê°™ì´ ìƒê°í•´ì£¼ëŠ” íŒŒíŠ¸ë„ˆ</p>
      </header>

      <div class="select-wrap">
        <label for="tone">ìƒí™© ì„ íƒ</label>
        <select id="tone">
          <option value="ê¸°ë³¸">ê¸°ë³¸</option>
          <option value="ì—°ì• ">ì—°ì• </option>
          <option value="ì§ì¥">ì§ì¥</option>
          <option value="ì¹œêµ¬">ì¹œêµ¬</option>
          <option value="ê°€ì¡±">ê°€ì¡±</option>
        </select>
      </div>

      <div class="textarea-wrap">
        <label for="message">ìƒëŒ€ë°© ë©”ì‹œì§€</label>
        <textarea
          id="message"
          placeholder="ì˜ˆ) ì˜¤ëŠ˜ ë­í• ê¹Œ?"
        ></textarea>
      </div>

      <p class="hint">ì¹´í†¡ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë¶™ì—¬ ë„£ì–´ì£¼ì„¸ìš”.</p>

      <button class="btn-primary" id="generateBtn">ë‹µì¥ ìƒì„±</button>
      <div class="status-text" id="status"></div>
    </section>
  </main>

  <script>
    const btn = document.getElementById("generateBtn");
    const toneEl = document.getElementById("tone");
    const msgEl = document.getElementById("message");
    const statusEl = document.getElementById("status");

    btn.addEventListener("click", async () => {
      const text = msgEl.value.trim();
      const tone = toneEl.value;

      if (!text) {
        statusEl.textContent = "ë¨¼ì € ìƒëŒ€ë°© ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.";
        return;
      }

      statusEl.textContent = "AIê°€ ë‹µì¥ì„ ìƒê° ì¤‘ì…ë‹ˆë‹¤...";

      try {
        const res = await fetch("/reply", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text, tone })
        });

        const data = await res.json();

        if (!res.ok) {
          statusEl.textContent = data.error || "ë‹µì¥ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
          return;
        }

        // âœ… ê²°ê³¼ë¥¼ localStorageì— ì €ì¥í•˜ê³  /resultë¡œ ì´ë™
        const payload = {
          tone,
          text,
          reply: data.reply || ""
        };
        localStorage.setItem("aiReplyCoach_lastResult", JSON.stringify(payload));
        window.location.href = "/result";

      } catch (err) {
        console.error(err);
        statusEl.textContent = "ì„œë²„ì™€ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
      }
    });
  </script>
</body>
</html>




